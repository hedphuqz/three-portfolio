var Z=Object.defineProperty;var F=(a,e,n)=>e in a?Z(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var S=(a,e,n)=>(F(a,typeof e!="symbol"?e+"":e,n),n);import{V as p,R as H,a as W,E as N,P as _,S as U,W as X,O as T,b as Y,M as V,c as J,G as Q,g as q,T as I,d as E,e as K,f as $,U as j,u as ee,h as te,i as ne,j as ae,r as k,o as se,k as ie,l as re,m as oe,n as ce}from"./vendor.fb3ac6b3.js";const be=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};be();const de={version:4.5,type:"Object",generator:"Object3D.toJSON"},ue=[{uuid:"0505ab09-7f2e-4642-90b2-b0b6787464b4",type:"BoxGeometry",width:.02,height:.02,depth:.02,widthSegments:1,heightSegments:1,depthSegments:1}],le=[{uuid:"1e93f407-ee5a-4c86-abcb-d10f362c6bee",type:"MeshNormalMaterial",depthFunc:3,depthTest:!0,depthWrite:!0,colorWrite:!0,stencilWrite:!1,stencilWriteMask:255,stencilFunc:519,stencilRef:0,stencilFuncMask:255,stencilFail:7680,stencilZFail:7680,stencilZPass:7680}],me={uuid:"0f816806-4c8d-4f2a-a0af-89becd717d68",type:"Group",name:"Group",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],children:[{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.02,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.04,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.06,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.08,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,.02,.08,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,-.02,.08,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,.04,.08,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.1,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,-.04,.08,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,.02,.1,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,.12,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"},{uuid:"cb0dd5b2-bc37-4142-9e54-5b2b1bea69c4",type:"Mesh",name:"Box",layers:1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,-.02,.1,0,1],geometry:"0505ab09-7f2e-4642-90b2-b0b6787464b4",material:"1e93f407-ee5a-4c86-abcb-d10f362c6bee"}]};var pe={metadata:de,geometries:ue,materials:le,object:me};const fe=new p(0,0,0);class he extends N{constructor(){super();S(this,"lastIntersected");this.lastIntersected=null}findIntersects(e){if(e.length>0){const n=e[0].object;this.lastIntersected===null&&(this.lastIntersected=n,this.emit("mousein",n)),this.lastIntersected.uuid!==n.uuid&&(this.emit("mouseout",this.lastIntersected),this.lastIntersected=n,this.emit("mousein",this.lastIntersected))}else this.lastIntersected&&(this.emit("mouseout",this.lastIntersected),this.lastIntersected=null)}}const we=()=>{const a=new _(70,window.innerWidth/window.innerHeight,.01,10);a.position.z=1;const e=new U,n=new X({antialias:!0});n.setSize(window.innerWidth,window.innerHeight);const i=new T(a,n.domElement);return i.enableDamping=!0,i.dampingFactor=.2,i.enableZoom=!1,i.enableRotate=!1,i.enablePan=!1,{camera:a,scene:e,renderer:n,controls:i}},ye=(a,e)=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)},ge=()=>{const a=new Y(.5,32,32),e=new V({wireframe:!0,emissive:16748307});return{sphere:new J(a,e),geometry:a,material:e}},M=(a,e)=>a.add(e).toArray(),xe=async(a,e)=>{const n=window.btoa(JSON.stringify(pe)),i=new te({color:16748307,emissive:16748307}),t=await new Promise((s,r)=>{new ne().load(`data:application/json;base64,${n}`,s,()=>{},r)});if(t.position.set(...e),a==="up"){t.userData.direction="up",t.rotateZ(0);const s=M(t.position,new p(0,.01,0));t.position.set(...s)}if(a==="right"){t.userData.direction="right",t.rotateZ(270*(Math.PI/180));const s=M(t.position,new p(.01,0,0));t.position.set(...s)}if(a==="down"){t.userData.direction="down",t.rotateZ(180*(Math.PI/180));const s=M(t.position,new p(0,-.01,0));t.position.set(...s)}if(a==="left"){t.userData.direction="left",t.rotateZ(90*(Math.PI/180));const s=M(t.position,new p(-.01,0,0));t.position.set(...s)}return t.traverse(function(s){s.material=i}),t},Me=async a=>{const e=new Q,[n,i,[t]]=a;return(await Promise.all(i.map(r=>xe(r,n)))).forEach(r=>{r.uuid=q(),e.add(r)}),e.rotateOnWorldAxis(new p(0,1,0),t*(Math.PI/180)),e},A=(a,e,n)=>{var t,s,r;n.x=(t=n.x)!=null?t:e.position.x,n.y=(s=n.y)!=null?s:e.position.y,n.z=(r=n.z)!=null?r:e.position.z;const i=new I(e.position).to(n,1e3).easing(E.Quadratic.InOut).start();a[e.uuid]=i},G=(a,e)=>{var n,i,t;e.x=(n=e.x)!=null?n:a.position.x,e.y=(i=e.y)!=null?i:a.position.y,e.z=(t=e.z)!=null?t:a.position.z,new I(a.position).to(e,1e4).easing(E.Quadratic.InOut).onUpdate(()=>a.lookAt(fe)).start()},Pe=(a,e)=>{var n,i,t;e.strength=(n=e.strength)!=null?n:a.strength,e.radius=(i=e.radius)!=null?i:a.radius,e.threshold=(t=e.threshold)!=null?t:a.threshold,new I(a).to(e,15e3).easing(E.Quadratic.InOut).start()},ve=()=>({raycaster:new H,pointer:new W}),Ie=(a,e,n)=>{const i=new K(a),t=new $(e,n);i.addPass(t);const s=new j(new W(window.innerWidth,window.innerHeight),.85,0,.5);return i.addPass(s),{composer:i,unrealBloomPass:s}},Ee=(a,e,n,i,t,s)=>{for(let r=0;r<e;r++){const l=n.attributes.uv.getX(r)*Math.PI*16,O=n.attributes.uv.getY(r)*Math.PI*16,P=l+a,b=Math.sin(P)*i,w=O+a,m=Math.cos(w)*i,f=r*3,y=r*3+1,h=r*3+2;n.attributes.position.setX(r,t[f]+s[f]*(b+m)),n.attributes.position.setY(r,t[y]+s[y]*(b+m)),n.attributes.position.setZ(r,t[h]+s[h]*(b+m))}n.attributes.position.needsUpdate=!0},Oe=(a,e)=>{ee(a),e.render()},ze=ae({setup(a){const e=k(null),n=k(null);let i=0;const t=[[0,0,1],[1,0,0],[0,0,-1],[-1,0,0]].map(c=>({cameraPosition:new p(...c),isVisited:!1})),{camera:s,renderer:r,scene:l,controls:O}=we(),{composer:P,unrealBloomPass:b}=Ie(r,l,s),{raycaster:w,pointer:m}=ve(),f=new he,y=()=>{if(!n.value)return;switch(n.value.userData.direction){case"left":if(i===0){i=3;break}i--;break;case"right":if(i===3){i=0;break}i++;break}const c=t[i].cameraPosition;G(s,c)},h=c=>{m.x=c.clientX/window.innerWidth*2-1,m.y=-(c.clientY/window.innerHeight)*2+1},z=()=>ye(r,s),{sphere:L,geometry:g}=ge();l.add(L);const D=g.attributes.position.count,B=Array.from(g.attributes.position.array),C=Array.from(g.attributes.normal.array),R=.002;return se(async()=>{if(e.value===null)return;e.value.appendChild(r.domElement);const c=[[[0,0,.6],["right","left"],[0]],[[0,0,.6],["right","left"],[90]],[[0,0,.6],["right","left"],[180]],[[0,0,.6],["right","left"],[270]]],v=await Promise.all(c.map(o=>Me(o)));v.forEach((o,u)=>{l.add(o)}),v.flatMap(o=>o.children.map(u=>u.uuid)),s.position.z=10,G(s,{z:1}),b.strength=3,b.radius=2,b.threshold=.5,Pe(b,{strength:.85,radius:0,threshold:.5});const d={};f.on("mouseout",o=>{n.value=null,o.parent.type==="Group"&&(o=o.parent),d[o.uuid]&&(d[o.uuid].stop(),delete d[o.uuid]),A(d,o,{x:0}),o.material.emissive.setHex(16748307)}),f.on("mousein",o=>{var x;if(o.geometry.type==="SphereGeometry")return;o.parent.type==="Group"&&(o=o.parent),n.value=o,d[o.uuid]&&(d[o.uuid].stop(),delete d[o.uuid]);const u={x:0};switch((x=n.value)==null?void 0:x.userData.direction){case"right":u.x=.04;break;case"left":u.x=-.04;break}A(d,o,u),o.material.emissive.setHex(12303223)}),r.setAnimationLoop(o=>{const u=Date.now()*.005;Ee(u,D,g,R,B,C),s.translateZ(Math.sin(o*.001)*5e-4),w.setFromCamera(m,s);const x=w.intersectObjects(l.children,!0);return f.findIntersects(x),Oe(o,P)}),addEventListener("resize",z),addEventListener("pointermove",h)}),ie(()=>{removeEventListener("resize",z),removeEventListener("pointermove",h)}),(c,v)=>(oe(),re("div",{onClick:y,ref_key:"threeContainer",ref:e},null,512))}});ce(ze).mount("#app");
